<body class="centeredItems">
  <h1>Add your session below here</h1>
  <p>Please put in amount of minutes of your session (ex. 85)</p>
  Session duration: <input id="duration" type="number" placeholder="Session duration"><br>
  <p>Please pick the right session for your studies</p>
  Session type: <select name="sessiontype" id="sessiontype">
    <option value="Lecture">Lecture</option>
    <option value="Selfstudies">Self Studies</option>
    <option value="Homework">Homework</option>
    <option value="Project">Project</option>
    <option value="TentaP">TentaP</option>
    <option value="Labs">Labs</option>
  </select><br>
  <p>Pick the grade for the session where 5 is best and 1 is worst</p>
  Session Rating: <select name="rating" id="rating">
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
    <option value="1">1</option>
  </select><br>
  <p>Pick the grade for how you feel physically, if you are sick it's a 1, and 5 is you are feeling good.</p>
  Physical wellbeing: <select name="health" id="health">
    <option value="5">5</option>
    <option value="4">4</option>
    <option value="3">3</option>
    <option value="2">2</option>
    <option value="1">1</option>
  </select><br>
  <button onclick="addSession()">Add session</button>
  
<script>
    async function addSession() {
    let duration = document.getElementById("duration").value;

    // Convert to a number
    let durationNum = Number(duration);

    // Check if the value is greater than 0 and is an integer
    if (durationNum <= 0 || !Number.isInteger(durationNum)) {
        alert("Please enter a whole number greater than 0 for duration.");
        return; // Stop function execution
    }

    let response = await fetch("http://localhost:3000/app?action=addStudySession", {
        method: "POST",
        body: JSON.stringify({
            time: durationNum,
            type: document.getElementById("sessiontype").value,
            rating: document.getElementById("rating").value,
            health: document.getElementById("health").value,
            courseId: "<%- courseData.courseId %>"
        }),
  	    headers: {
  	        "Content-type": "application/json; charset=UTF-8"
  	    }
      });
		  let responseJSON = await response.json();
          alert(responseJSON.message);
      }
    
</script>
</body>
